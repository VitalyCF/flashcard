<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="deck-list">
  <template>
    <style>
      :host {
        display: block;
      }
      li {
        padding: 10px;
      }
    </style>

    <ul>
      <template is="dom-repeat" items="{{items}}">
        <li><a href="{{_deckUrl(item.id)}}">{{item.name}}</a></li>
      </template>
    </ul>
  </template>

  <script>
    (function () {
      'use strict';

      Polymer({
        is: 'deck-list',
        properties: {
          items: {
            type: Array,
            notify: true,
            value: function() {return []; }
          },
        },

        ready: function() {
          this._loadDecks();
        },

        _loadDecks: function() {
          // connect to database & load decks
          fs.getConnection().then(function(db) {
            return db.select().from(fs.deck_).exec();
          }).then(function(rs) {
            if (rs.length > 0) {
              console.log(rs.length + ' deck(s) loaded.');
              this.items = rs;
            } else {
              // empty
              console.log('No deck!');
            }
          }.bind(this));
        },

        _deckUrl: function(id) {
          return '/decks/' + id;
        },

        _add: function() {
          // db.insert(DECK_TABLE, null, values);
        },

        _delete: function() {
          // db.delete(DECK_TABLE, " name = '" + deck + "'", null);
        },

        _rename: function() {
          // db.update(DECK_TABLE, values, "name='" + oldName + "'", null);
        }

      });
    })();
  </script>

</dom-module>
