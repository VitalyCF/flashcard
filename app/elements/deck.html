
<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="deck-list">
  <style>
    :host {
      display: block;
    }
    li {
      padding: 10px;
    }
    button {
      cursor: pointer;
    }
  </style>

  <template>
    <ul>
      <template is="dom-repeat" items="{{items}}">
        <li class="layout horizontal">
          <a href="{{_deckUrl(item.id)}}">{{item.name}}</a>
          <span class="flex"></span>
          <button>download</button>
        </li>
      </template>
    </ul>
  </template>

  <script>
    Polymer({
      is: 'deck-list',
      properties: {
        items: {
          type: Array,
          notify: true
        },
      },

      created: function() {
        console.log('Deck created: ', new Date());
      },

      ready: function() {
        console.log('Deck ready: ', new Date());
        this._loadDecks();
      },

      _loadDecks: function() {
        db.getDecks().then(function(rs) {
          if (rs.length > 0) {
            this.items = rs;
          } else {
            // empty
            console.log('No deck!');
          }
        }.bind(this));
      },

      _deckUrl: function(id) {
        return '/decks/' + id;
      },

      add: function() {
        // db.insert(DECK_TABLE, null, values);
        console.log('add deck');
      },

      _delete: function() {
        // db.delete(DECK_TABLE, " name = '" + deck + "'", null);
      },

      _rename: function() {
        // db.update(DECK_TABLE, values, "name='" + oldName + "'", null);
      }

    });

  </script>

</dom-module>
